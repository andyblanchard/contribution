<template name="contribution">

	<!-- hero section -->
	<section class="mp-contrib-hero">
		<div class="container">
			<div class="row">
				<div class="col-md-6 col-sm-6 col-xs-12 text-center hero-text">
					<h1>Contribution</h1>
          {{#unless isStarted}}
            <p>Starting February 15th 2017</p>
          {{/unless}}
          {{#if isStarted}}
            {{#unless isTermsAccepted}}
              <p>Please read carefully and thouroughly.</p>
            {{/unless}}
          {{/if}}
          {{#if isTermsAccepted}}
            {{#unless isAllAccepted}}
              <p>We want you to understand what you're in for</p>
            {{/unless}}
          {{/if}}
          {{#if isAllAccepted}}
            <p>The time has come for you to decide</p>
          {{/if}}
				</div>
        <div class="col-md-6 col-sm-6 col-xs-12 hero-summary">
          {{> network_summary}}
          {{> contribution_summary}}
				</div>
			</div>
		</div>
	</section>

	<section class="mp-contrib-main">
    <!-- Terms&Conditions -->
		<div class="container mp-contrib-term">
			<div class="row">
				<div class="col-md-9 col-md-offset-1 col-lg-8 col-lg-offset-2">
          <!-- Terms Accepted -->
					<h2 class="contrib-title">Terms and Conditions</h2>
					<div class="form-checkbox">
						<p>I hereby confirm to have read and understood the following document:</p>
						<div class="checkbox">
							<label>
								<input {{whenECParamsSet}} type="checkbox" class="filled-in" id="melon-terms" >
								<span class="input-check"></span>
								<a href="">Melon Contribution Terms</a> (tba)
							</label>
						</div>
					</div>
					<div class="form-checkbox">
						<p>I hereby acknowledge the following points:</p>
						<div class="checkbox">
							<label>
								<input {{whenECParamsSet}} type="checkbox" class="filled-in" id="no-equity" >
								<span class="input-check"></span>
								Contributor does not receive equity in Melonport AG.
							</label>
						</div>
						<div class="checkbox">
							<label>
								<input {{whenECParamsSet}} type="checkbox" class="filled-in" id="workshop" >
								<span class="input-check"></span>
								Contributions will be used to fullfill the workshop mission.
							</label>
						</div>
					</div>
					<div class="form-checkbox">
						<p>I hereby confirm to be:</p>
						<div class="checkbox">
							<label>
								<input {{whenECParamsSet}} type="checkbox" class="filled-in" id="citizen" >
								<span class="input-check"></span>
								Non US citizen nor signing on behalf of a US citizen.
							</label>
						</div>
					</div>
					<div class="form-checkbox">
            <!-- Documents Read -->
						<p>I hereby confirm to have read the following documents:</p>
						<div class="checkbox">
							<label>
								<input {{whenECParamsSet}} type="checkbox" class="filled-in" id="melon-greenpaper" >
								<span class="input-check"></span>
                <a href="#" onclick="window.open('melonprotocol.pdf', '_blank', 'fullscreen=yes'); return false;">Melon Protocol Green Paper</a> (tba)
							</label>
						</div>
						<div class="checkbox">
							<label>
								<input {{whenECParamsSet}} type="checkbox" class="filled-in" id="melon-specifications" >
								<span class="input-check"></span>
								<a href="">Melon Specifications</a> (tba)
							</label>
						</div>
					</div>
				</div>
			</div>
		</div>

		<!-- confirm section -->
		<div class="container mp-contrib-confirm">
			<div class="row">
				<div class="col-md-9 col-md-offset-1 col-lg-8 col-lg-offset-2">
          <form class="signature">
  					<h2 class="contrib-title">Confirmation</h2>
  					<p>Please insert the Ethereum address with which you would like to contribute if and only if you have read, acknowledged and agreed upon all of the above terms and conditions.</p>
  					<div class="form-inline mp-form">
  						<div class="form-group col-md-10 col-sm-10 col-xs-10 has-feedback">
                {{#if isClientConnected}}
                  <input {{whenECParamsSet}} type="text" class="form-control" id="contribution_address" value = "{{clientAddress}}" required >
                {{else}}
                  <input {{whenECParamsSet}} type="text" class="form-control" id="contribution_address" placeholder="0xaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa" required >
                {{/if}}
  							<span style="color:#4e4e4e" class="form-control-feedback" id="contribution-text" aria-hidden="true">Your Ethereum Address</span>
  							<span class="form-control-feedback" id="success-message" aria-hidden="true"></span>
  							<span style="color:#1189c6" class="form-control-feedback" id="error-message" aria-hidden="true"></span>
  						</div>

              {{#if isAllAccepted}}
                {{#if isECParamsSet}}
                  <button type="submit" class="btn col-md-2 col-sm-2 col-xs-2 btn-main"><a href="#results">SHOW RESULTS</a></button>
                {{else}}
                  <button type="submit" class="signature btn col-md-2 col-sm-2 col-xs-2 btn-main">I CONFIRM</button>
                {{/if}}
              {{else}}
                <button type="submit" class="disabled btn col-md-2 col-sm-2 col-xs-2 btn-main">I CONFIRM</button>
              {{/if}}
  					</div>
          </form>

				</div>
			</div>
		</div>

    {{#if isECParamsSet}}
  		<!-- signature section -->
  		<div class="container mp-contrib-sign">
  			<div class="row">
  				<div class="col-md-9 col-md-offset-1 col-lg-8 col-lg-offset-2 col-sm-12 col-xs-12">
            <div id="results" class="section scrollspy">
    					<h2 class="contrib-title">Signature (not official yet)</h2>
    					<p>With these parameters you can contribute to Melon.</p>
    					<ul>
    						<li>Ethereum Address: <strong>{{getContributionAddress}}</strong></li>
    						<li>Sig.v is: <strong>{{getSigV}}</strong></li>
    						<li>Sig.r is: <strong>{{getSigR}}</strong></li>
    						<li>Sig.s is: <strong>{{getSigS}}</strong></li>
    					</ul>
    					<p>To contribute you can either use the Ethereum Wallet, MetaMask or Mist.</p>
    				</div>
  				</div>
  			</div>
  		</div>

      {{#if isClientConnected}}
        <!-- TODO change to main before feb 15 -->
        {{#if isRopstenNetwork}}
          <!-- send fund section -->
          <div class="container mp-contrib-send">
            <div class="row">
              <div class="col-md-9 col-md-offset-1 col-lg-8 col-lg-offset-2">
                <form class="amount">
                  <h2 class="contrib-title">Send Funds</h2>
                  <p>Please insert the amount of Ether you'd like to contribute from your contribution address: <br/>{{getContributionAddress}}</p>
                  <div class="form-inline mp-form">
                    <div class="form-group col-md-10 col-sm-10 col-xs-10 has-feedback">
                      <input type="number" step="any" class="form-control" id="ether_amount" placeholder="Ether Amount">
                      <!-- <span class="form-control-feedback" id="melon-amount-message" aria-hidden="true">Melon Amount</span> -->
                    </div>
                    <button type="submit" class="amount btn col-md-2 col-sm-2 col-xs-2 btn-main">SEND</button>
                  </div>
                  <br>
                </form>
              </div>
              <div class="col-md-9 col-md-offset-1 col-lg-8 col-lg-offset-2">
                <p id='txStatus'></p>
              </div>
            </div>
          </div>
        {{else}}
          <section class="mp-contrib-main">
            <!-- Terms&Conditions -->
            <div class="container mp-contrib-term">
              <div class="row">
                <div class="col-md-9 col-md-offset-1 col-lg-8 col-lg-offset-2">
                  <!-- Terms Accepted -->
                  <h2 class="contrib-title">To send funds directly please use the Ropsten Testnet untill February 15th 2017</h2>
                </div>
              </div>
            </div>
          </section>
        {{/if}}
      {{else}}

      {{/if}}
    {{/if}}

  </section>

</template>
